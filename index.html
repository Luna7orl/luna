<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mensaje Especial</title>
  <style>
    :root {
      --azul-pastel: #B0E0E6;
      --amarillo-bajo: #FFD700;
      --amarillo-hover: #FFC000;
      --error: #ff6b6b;
    }
    
    body {
      font-family: 'Arial', sans-serif;
      background-color: var(--azul-pastel);
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      margin: 0;
      text-align: center;
      line-height: 1.6;
    }
    
    .container {
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      max-width: 600px;
      width: 90%;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      margin: 20px auto;
      animation: fadeIn 0.5s ease-in-out;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-10px); }
      75% { transform: translateX(10px); }
    }
    
    h1, h2, h3 {
      color: var(--amarillo-bajo);
      text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
      margin-bottom: 20px;
    }
    
    .texto-mensaje {
      color: #333;
      text-align: left;
      margin: 20px 0;
      font-size: 1.1em;
    }
    
    #imagen-dedo img {
      width: 100%;
      max-width: 400px;
      border-radius: 10px;
      margin: 15px auto;
      border: 3px solid var(--amarillo-bajo);
      display: block;
    }
    
    input, button {
      width: 100%;
      padding: 12px;
      margin-top: 15px;
      border: 2px solid var(--amarillo-bajo);
      border-radius: 8px;
      font-size: 16px;
      box-sizing: border-box;
    }
    
    input:focus {
      outline: none;
      border-color: var(--amarillo-hover);
      box-shadow: 0 0 5px rgba(255, 208, 0, 0.5);
    }
    
    button {
      background-color: var(--amarillo-bajo);
      color: #333;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
    }
    
    button:hover {
      background-color: var(--amarillo-hover);
      transform: translateY(-2px);
    }
    
    .botones-container {
      display: flex;
      gap: 15px;
      margin-top: 25px;
      justify-content: center;
      flex-wrap: wrap;
    }
    
    .botones-container button {
      flex: 1;
      min-width: 120px;
    }
    
    #mensaje-error {
      color: var(--error);
      display: none;
      margin-top: 10px;
      font-weight: bold;
    }
    
    /* Ocultar secciones inicialmente */
    #formulario, #thanks, #mensaje-secreto, #imagen-dedo, 
    #disculpa-inicial, #disculpa-parte1, #disculpa-parte2, #final {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Pantalla de contraseña -->
  <div id="login" class="container">
    <h2>Ingresa la contraseña</h2>
    <input type="password" id="password" placeholder="Contraseña" required>
    <button onclick="verificarContrasena()">Entrar</button>
    <p id="mensaje-error">Contraseña incorrecta. Intenta nuevamente.</p>
  </div>

  <!-- Formulario -->
  <div id="formulario" class="container">
    <h2>Formulario de Registro</h2>
    <form id="myForm" action="https://formsubmit.co/axelluneta76@gmail.com" method="POST">
      <input type="hidden" name="_subject" value="Alguien ha entrado a tu página especial">
      <input type="hidden" name="_template" value="table">
      <input type="hidden" name="_next" value="https://luna7orl.github.io/luna/thanks.html">
      <input type="text" name="_honey" style="display:none">
      <input type="hidden" name="_captcha" value="false">
      
      <label for="name">Nombre:</label>
      <input type="text" name="name" id="name" required placeholder="Tu nombre" minlength="2">
      <button type="button" onclick="enviarFormulario()">Enviar</button>
    </form>
  </div>

  <!-- Mensaje de agradecimiento -->
  <div id="thanks" class="container">
    <h2>¡Gracias por estar aquí!</h2>
    <p id="thankMessage"></p>
    <button onclick="mostrarMensajeSecreto()">Continuar</button>
  </div>

  <!-- Mensaje secreto -->
  <div id="mensaje-secreto" class="container">
    <p>Tengo que decirte algo, mira...</p>
    <button onclick="mostrarImagenDedo()">Continuar</button>
  </div>

  <!-- Imagen del dedo -->
  <div id="imagen-dedo" class="container">
    <p>Mi dedo</p>
    <img src="https://i.ibb.co/Y7GZjN2x/image.jpg" alt="Dedo">
    <button onclick="mostrarDisculpaInicial()">No es cierto, es lo siguiente</button>
  </div>

  <!-- Disculpa inicial -->
  <div id="disculpa-inicial" class="container">
    <div class="texto-mensaje">
      <p>Hola, soy yo de nuevo, no sé si abras esto y si sí pues una disculpa por lo del dedo jajaja, era necesario que lo pusiera, me tardé un día casi sin parar y con tres horas de dormir por nostalgia, pensamientos y creando esta página nunca había hecho una por ciento, entonces tiene detalles que perfeccionar, pero espero que te haya gustado, es sólo para ti.</p>
      <p>Y pues es para decirte, que eres una persona muy amable, muy linda me atrevería a decir que la más linda que he conocido, con unas expresiones faciales demasiado bonitas y únicas, especial, única, con corazón de pollo, carismática muuuy carismática jajaja, aparte de coqueta claro y barbara jajaja pero creo que esto ya lo sabes.</p>
      <p>Pero no venía a decirte lo mucho que vales y espectacular que eres pero no me costaba nada recordártelo, lo que te quería decir es que te debo una disculpa.</p>
    </div>
    <button onclick="mostrarDisculpaParte1()">Continuar</button>
  </div>

  <!-- Disculpa parte 1 -->
  <div id="disculpa-parte1" class="container">
    <div class="texto-mensaje">
      <p>Verdad que si quieres una disculpa, chimosilla.</p>
    </div>
    <button onclick="mostrarDisculpaParte2()">Seguir con la disculpa</button>
  </div>

  <!-- Disculpa parte 2 -->
  <div id="disculpa-parte2" class="container">
    <div class="texto-mensaje">
      <p>Te debo más que una disculpa por hacerte sentir "mal y tal vez confundida" y no sé si ya me la hayas aceptado, pero me voy a seguir disculpando porque aunque para mí no arreglan nada si la otra persona no las acepta, para mí también son un acto de arrepentimiento que tiene mucho valor según una persona, no son de cobradía, si no de valentía y no te voy a mentir, aunque nos hemos conocido muy poco hasta el momento para mí ya eres muy importante en mi vida, me importas más de lo que te he dicho y de lo que te podré decir, conocerte es de las mejores cosas que han pasado hasta el momento, me interesa como te sientes desde que despiertas hasta que te vas a descansar y aunque tal vez no lo demuestro con mis expresiones y acciones, pero estoy feliz al verte, conocerte y dichoso de ver cuando haces eso tan tuyo de fruncir la nariz, cada vez que miro tu sonrisa y me siento afortunado cuando causo en ti una risa, cuando me dejas acompañarte a cualquier lugar.</p>
      <p>Deseo de que esta historia se siga escribiendo, quiero saber que puede ser de nosotros que nos prepara el mañana, porque si algo he aprendido de historias contadas y experiencias es que cuando alguien importa de verdad, uno no se rinde tan fácil.</p>
    </div>
    <div class="botones-container">
      <button onclick="opcionSeleccionada('seguir')">Seguir contando historia</button>
      <button onclick="opcionSeleccionada('nada')">Ya nada dota</button>
    </div>
  </div>

  <!-- Final -->
  <div id="final" class="container">
    <h2 id="mensaje-final"></h2>
    <button onclick="location.reload()">Volver al inicio</button>
  </div>

  <script>
    // Función VERIFICADA para contraseña (solución definitiva)
    function verificarContrasena() {
      const pass = document.getElementById('password').value;
      const passNormalizada = pass.trim().toLowerCase();
      
      if (passNormalizada === 'pequitas') {
        document.getElementById('login').style.display = 'none';
        document.getElementById('formulario').style.display = 'block';
        document.getElementById('mensaje-error').style.display = 'none';
        document.getElementById('name').focus();
      } else {
        document.getElementById('mensaje-error').style.display = 'block';
        document.getElementById('password').value = '';
        document.getElementById('password').focus();
        document.getElementById('login').style.animation = 'shake 0.5s';
        setTimeout(() => {
          document.getElementById('login').style.animation = '';
        }, 500);
      }
    }

    // Función para enviar formulario
    function enviarFormulario() {
      const nombre = document.getElementById('name').value.trim();
      
      if (nombre.length < 2) {
        alert('Por favor ingresa un nombre válido (mínimo 2 caracteres)');
        document.getElementById('name').focus();
        return;
      }
      
      document.getElementById('thankMessage').textContent = Gracias, ${nombre}, por estar aquí.;
      document.getElementById('myForm').submit();
      document.getElementById('formulario').style.display = 'none';
      document.getElementById('thanks').style.display = 'block';
    }

    // Funciones de navegación
    function mostrarMensajeSecreto() {
      document.getElementById("thanks").style.display = "none";
      document.getElementById("mensaje-secreto").style.display = "block";
    }
    
    function mostrarImagenDedo() {
      document.getElementById("mensaje-secreto").style.display = "none";
      document.getElementById("imagen-dedo").style.display = "block";
    }
    
    function mostrarDisculpaInicial() {
      document.getElementById("imagen-dedo").style.display = "none";
      document.getElementById("disculpa-inicial").style.display = "block";
    }
    
    function mostrarDisculpaParte1() {
      document.getElementById("disculpa-inicial").style.display = "none";
      document.getElementById("disculpa-parte1").style.display = "block";
    }
    
    function mostrarDisculpaParte2() {
      document.getElementById("disculpa-parte1").style.display = "none";
      document.getElementById("disculpa-parte2").style.display = "block";
    }
    
    // Función para opciones finales
    function opcionSeleccionada(opcion) {
      const mensajeFinal = document.getElementById('mensaje-final');
      const respuesta = opcion === 'seguir' ? 'Seguir contando historia' : 'Ya nada dota';
      
      document.getElementById("disculpa-parte2").style.display = "none";
      document.getElementById("final").style.display = "block";
      mensajeFinal.textContent = opcion === 'seguir' 
        ? "¡La historia continuará!" 
        : "Gracias por llegar hasta aquí";
      
      // Enviar respuesta por correo
      const formData = new FormData();
      formData.append('name', document.getElementById('name').value || 'Anónimo');
      formData.append('respuesta', respuesta);
      formData.append('_subject', 'Respuesta recibida en tu página especial');
      
      fetch('https://formsubmit.co/ajax/axelluneta76@gmail.com', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => console.log('Éxito:', data))
      .catch(error => console.error('Error:', error));
    }

    // Soporte para tecla Enter
    document.getElementById('password').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') verificarContrasena();
    });
    
    document.getElementById('name').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') enviarFormulario();
    });
  </script>
</body>
</html>
